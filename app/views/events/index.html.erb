<div class="container mt-5">
  <div class="has-text-centered">
    <h1 class="title is-2 has-text-primary">Lista wydarzeń</h1>
    <p class="subtitle is-5">Przeglądaj dostępne wydarzenia i zarządzaj nimi</p>
  </div>

  <div class="has-text-centered my-5">
    <%= link_to "Dodaj nowe wydarzenie", new_event_path, class: "button is-primary is-large" %>
  </div>

  <% if events.any? %>
    <div class="table-container">
      <table class="table is-fullwidth is-hoverable is-striped">
        <thead>
          <tr>
            <th>Nazwa</th>
            <th>Opis</th>
            <th>Miejsce</th>
            <th>Data</th>
            <th>Kategoria</th>
            <th>Status</th>
            <th class="has-text-centered">Akcje</th>
          </tr>
        </thead>
        <tbody>
          <% events.each do |event| %>
            <tr>
              <td>
                <span class="icon-text">
                  <span class="icon">
                    <i class="fas fa-calendar-alt"></i>
                  </span>
                  <span><%= event.name %></span>
                </span>
              </td>
              <td><%= truncate(event.description, length: 100) %></td>
              <td><%= event.place %></td>
              <td><%= event.date.strftime("%d-%m-%Y %H:%M") %></td>
              <td><%= event.category %></td>
              <td>
                <% if event.past_event? %>
                  <span class="tag is-warning">Wydarzenie minione</span>
                <% else %>
                  <span class="tag is-success">Aktywne</span>
                <% end %>
              </td>
              <td>
                <div class="field is-grouped is-grouped-centered">
                  <p class="control">
                    <%= link_to "Szczegóły", event_path(event), class: "button is-small is-info" %>
                  </p>

                  <% if event.editable? %>
                    <p class="control">
                      <%= link_to "Edytuj", edit_event_path(event), class: "button is-small is-warning" %>
                    </p>
                  <% end %>

                  <p class="control">
                    <%= button_to "Usuń", event_path(event), method: :delete,
                        data: { turbo_confirm: "Czy na pewno chcesz usunąć to wydarzenie?" },
                        class: "button is-small is-danger" %>
                  </p>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="notification is-warning has-text-centered">
      <p>Brak wydarzeń do wyświetlenia.</p>
    </div>
  <% end %>
</div>