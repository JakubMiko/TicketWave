<div class="container mt-5">
  <div class="box">
    <div class="columns">
      <div class="column is-4">
        <figure class="image is-4by3">
          <% if event.image.attached? %>
            <%= image_tag url_for(event.image), alt: event.name, class: "is-slightly-rounded" %>
          <% else %>
            <img src="https://placehold.co/400x300/7957d5/FFFFFF?text=<%= event.category.capitalize %>" alt="<%= event.name %>">
          <% end %>
        </figure>
      </div>
      <div class="column is-8">
        <h1 class="title is-3 has-text-primary"><%= event.name %></h1>
        <p class="subtitle is-5 has-text-grey">Szczegóły wydarzenia</p>

          <div class="content">
            <p><strong  class="has-text-black">Opis:</strong> <%= event.description %></p>
            <p><strong  class="has-text-black">Miejsce:</strong> <%= event.place %></p>
            <p><strong  class="has-text-black">Data:</strong> <%= event.date.strftime("%d-%m-%Y %H:%M") %></p>
            <p><strong  class="has-text-black">Kategoria:</strong> <%= Event.categories[event.category] %></p>
          </div>

          <div class="buttons">
            <% if current_user&.admin? %>
              <% unless event.past_event? %>
                <%= link_to "Edytuj", edit_event_path(event), class: "button is-warning" %>
              <% end %>
              <%= link_to "Usuń", event_path(event), method: :delete, data: { confirm: "Czy na pewno chcesz usunąć to wydarzenie?" }, class: "button is-danger" %>
              <% unless event.past_event? %>
                <%= link_to "Dodaj pulę biletów", new_event_ticket_batch_path(event),
                            class: "button is-primary",
                            data: { turbo_frame: "modal_frame" } %>
              <% end %>
            <% end %>
            <%= link_to "Powrót do listy", events_path, class: "button is-light" %>
          </div>
      </div>
    </div>
  </div>

  <div data-controller="auto-refresh"
      data-auto-refresh-interval-value="3000"
      data-auto-refresh-url-value="<%= event_path(event) %>">
    <div data-auto-refresh-target="content">
      <%= render "ticket_batches_list", event: event %>
    </div>
  </div>

  <turbo-frame id="modal_frame"></turbo-frame>
</div>